<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Customer Messages â€” Taho Soy Avenue</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <aside class="sidebar">
    <div>
      <h2>Admin Panel</h2>
      <nav class="nav-links">
        <a href="/">ğŸ  Dashboard</a>
        <a href="/products.html">ğŸ“¦ Product List</a>
        <a href="/customer-list.html">ğŸ‘¥ Customers</a>
        <a href="/customer-messages.html" class="active">ğŸ’¬ Messages</a>
      </nav>
    </div>
    <div class="footer">Â© 2025 Taho Soy Avenue <br> All Rights Reserved</div>
  </aside>

  <main class="main">
    <h1>ğŸ’¬ Customer Messages</h1>

    <div class="controls">
      <input id="q" placeholder="Search messages (name, email, text)" />
      <button id="go">Search</button>
    </div>

    <div id="list"></div>
  </main>

  <script>
    const list = document.getElementById('list');
    async function load(q='') {
      const res = await fetch(`/api/messages?q=${encodeURIComponent(q)}`);
      const js = await res.json();
      list.innerHTML = js.data.map(m => `
        <div class="msg">
          <strong>${m.name} (${m.email})</strong> <em>${m.dateSent}</em>
          <p>${m.message}</p>
        </div>
      `).join('') || '<p>No messages found.</p>';
    }

    document.getElementById('go').addEventListener('click', () => load(document.getElementById('q').value));
    document.getElementById('q').addEventListener('keyup', e => { if (e.key === 'Enter') load(e.target.value); });
    load();
  </script>
</body>
</html>
